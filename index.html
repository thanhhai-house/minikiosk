<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kiosk Ph·ª• T√πng Xe</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="wrap top">
      <div class="brand">
        <div class="logo">üöõ</div>
        <div>
          <h1>Kiosk Ph·ª• T√πng Xe</h1>
          <p>ID ‚Ä¢ OEM ‚Ä¢ Th∆∞∆°ng hi·ªáu ‚Ä¢ T·ªìn kho ‚Ä¢ ·∫¢nh ‚Ä¢ Nh·∫≠p/B√°n ‚Ä¢ B√°o gi√° ‚Ä¢ Xu·∫•t CSV (Google Sheets)</p>
        </div>
      </div>

      <div class="actions">
        <button class="btn ghost" id="btnExportInv">Xu·∫•t CSV t·ªìn kho</button>
        <button class="btn ghost" id="btnExportMoves">Xu·∫•t CSV nh·∫≠p/xu·∫•t</button>

        <button class="btn ghost" id="btnExportJson">Xu·∫•t JSON</button>
        <label class="btn ghost">
          Nh·∫≠p JSON
          <input id="fileImport" type="file" accept="application/json" hidden />
        </label>

        <button class="btn danger" id="btnReset">Xo√° to√†n b·ªô</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- FORM -->
    <section class="panel">
      <div class="panel-head">
        <h2>‚ûï Th√™m / C·∫≠p nh·∫≠t ph·ª• t√πng</h2>
        <p class="muted">Ch·ª•p ·∫£nh ho·∫∑c ch·ªçn ·∫£nh t·ª´ ƒëi·ªán tho·∫°i. D·ªØ li·ªáu l∆∞u trong tr√¨nh duy·ªát m√°y b·∫°n.</p>
      </div>

      <form id="formPart" class="grid">
        <input type="hidden" id="id" />

        <div class="field">
          <label>ID</label>
          <input id="idView" placeholder="T·ª± t·∫°o" disabled />
        </div>

        <div class="field">
          <label>M√£ OEM</label>
          <input id="oem" placeholder="VD: 12345-K56-VN" required />
        </div>

        <div class="field">
          <label>T√™n</label>
          <input id="name" placeholder="VD: B·ªë th·∫Øng ƒëƒ©a tr∆∞·ªõc" required />
        </div>

        <div class="field">
          <label>Th∆∞∆°ng hi·ªáu (h√£ng xe)</label>
          <input id="brand" placeholder="VD: Honda / Yamaha / Suzuki / Piaggio..." required />
        </div>

        <div class="field">
          <label>Lo·∫°i (Danh m·ª•c)</label>
          <input id="type" placeholder="VD: L·ªçc / Phanh / Nh·ªõt / Nh√¥ng s√™n dƒ©a..." required />
        </div>

        <div class="field">
          <label>Gi√° ti·ªÅn (VNƒê)</label>
          <input id="price" type="number" min="0" step="1000" placeholder="VD: 155000" required />
        </div>

        <div class="field">
          <label>S·ªë l∆∞·ª£ng t·ªìn</label>
          <input id="qty" type="number" min="0" step="1" placeholder="VD: 10" required />
        </div>

        <div class="field">
          <label>H√¨nh ·∫£nh</label>
          <input id="image" type="file" accept="image/*" />
          <div class="hint">B·∫•m ch·ªçn h√¨nh ‚Üí ch·ªçn Camera ƒë·ªÉ ch·ª•p</div>
        </div>

        <div class="field preview">
          <label>Xem tr∆∞·ªõc</label>
          <div class="imgbox">
            <img id="previewImg" alt="preview" />
            <div id="previewEmpty" class="muted">Ch∆∞a c√≥ h√¨nh</div>
          </div>
        </div>

        <div class="row">
          <button class="btn" type="submit" id="btnSave">L∆∞u ph·ª• t√πng</button>
          <button class="btn ghost" type="button" id="btnClear">Nh·∫≠p m·ªõi</button>
        </div>
      </form>
    </section>

    <!-- LIST -->
    <section class="panel">
      <div class="panel-head row2">
        <div>
          <h2>üì¶ Danh s√°ch ph·ª• t√πng</h2>
          <p class="muted">B·∫•m n√∫t l·ªõn ƒë·ªÉ l·ªçc theo lo·∫°i/th∆∞∆°ng hi·ªáu ‚Ä¢ Ch·ªçn nhi·ªÅu ƒë·ªÉ in b√°o gi√°</p>
        </div>
        <div class="row">
          <input id="q" class="search" placeholder="T√¨m theo OEM / t√™n / lo·∫°i / th∆∞∆°ng hi·ªáu..." />
          <button class="btn ghost" id="btnClearSelect">B·ªè ch·ªçn</button>
          <button class="btn" id="btnPrintQuote">In b√°o gi√° (ƒë√£ ch·ªçn)</button>
        </div>
      </div>

      <!-- N√∫t l·ªõn l·ªçc nhanh -->
      <div id="typeButtons" class="typebar"></div>
      <div id="brandButtons" class="typebar" style="margin-top:10px"></div>

      <div id="stats" class="stats"></div>

      <div id="list" class="cards"></div>
    </section>
  </main>

  <!-- DIALOG: Chi ti·∫øt -->
  <dialog id="dlgDetail" class="dlg">
    <form method="dialog" class="dlg-body">
      <div class="dlg-top">
        <h3 id="dTitle">Chi ti·∫øt</h3>
        <button class="btn ghost" value="cancel">ƒê√≥ng</button>
      </div>

      <div class="detail">
        <div class="detail-img">
          <img id="dImg" alt="img" />
          <div id="dImgEmpty" class="muted">Kh√¥ng c√≥ h√¨nh</div>
        </div>

        <div class="detail-info">
          <div class="kv2">
            <div class="k">ID</div><div class="v" id="dId"></div>
            <div class="k">OEM</div><div class="v" id="dOem"></div>
            <div class="k">T√™n</div><div class="v" id="dName"></div>
            <div class="k">Th∆∞∆°ng hi·ªáu</div><div class="v" id="dBrand"></div>
            <div class="k">Lo·∫°i</div><div class="v" id="dType"></div>
            <div class="k">Gi√°</div><div class="v price" id="dPrice"></div>
            <div class="k">T·ªìn</div><div class="v" id="dQty"></div>
          </div>

          <div class="row" style="margin-top:10px">
            <button class="btn ghost" type="button" id="btnPrintSingle">In b√°o gi√° (1 sp)</button>
            <button class="btn" type="button" id="btnMoveFromDetail">Nh·∫≠p / B√°n</button>
          </div>
        </div>
      </div>

      <div class="history">
        <h4>L·ªãch s·ª≠ nh·∫≠p/xu·∫•t</h4>
        <div id="dMoves" class="moves"></div>
      </div>
    </form>
  </dialog>

  <!-- DIALOG: Nh·∫≠p/B√°n -->
  <dialog id="dlgMove" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3 id="dlgTitle">Nh·∫≠p/B√°n</h3>
      <p class="muted" id="dlgSub"></p>

      <div class="grid2">
        <div class="field">
          <label>Lo·∫°i thao t√°c</label>
          <select id="moveKind" class="select">
            <option value="in">Nh·∫≠p (+)</option>
            <option value="out">B√°n (-)</option>
          </select>
        </div>
        <div class="field">
          <label>S·ªë l∆∞·ª£ng</label>
          <input id="moveQty" type="number" min="1" step="1" value="1" />
        </div>
      </div>

      <div class="field">
        <label>Ghi ch√∫ (tu·ª≥ ch·ªçn)</label>
        <input id="moveNote" placeholder="VD: b√°n cho kh√°ch A / nh·∫≠p l√¥ m·ªõi..." />
      </div>

      <menu class="dlg-actions">
        <button class="btn ghost" value="cancel">Hu·ª∑</button>
        <button class="btn" id="btnDoMove" value="ok">X√°c nh·∫≠n</button>
      </menu>
    </form>
  </dialog>

  <!-- KHUNG IN (·∫©n) -->
  <section id="printArea" class="print-area" aria-hidden="true"></section>

  <script src="app.js"></script>
</body>
</html>
